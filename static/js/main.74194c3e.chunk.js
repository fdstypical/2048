(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,a,t){e.exports=t(21)},17:function(e,a,t){},18:function(e,a,t){},21:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),i=(t(17),t(2)),l=t(3),s=t(5),u=t(4),m=t(6);t(18);var f,d=function(e){var a;switch(e){case 2:a="#eee4da";break;case 4:a="#ede0c8";break;case 8:a="#f2b179";break;case 16:a="#f59663";break;case 32:a="#f67c5f";break;case 64:a="#f65e3b";break;case 128:a="#edcf72";break;case 256:a="#edcc61";break;case 512:a="#ecc851";break;case 1024:a="#edc53f";break;case 2048:a="#edc22e";break;case 4096:a="#2285d0";break;case 8192:a="#000000"}return a},v=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;v>=319&&(f=60),v>=479&&(f=100),v>=739&&(f=165);var h=f,p=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).state={showCell:!1},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timerId=setTimeout(function(){e.setState({showCell:!0})},210)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerId)}},{key:"render",value:function(){165===this.state.width&&165===this.state.height&&clearInterval(this.timerId);var e,a=15+this.props.x*h+10*this.props.x+"px",t=15+this.props.y*h+10*this.props.y+"px",n=d(this.props.value),c=this.state.showCell?"flex":"none";return e=this.props.value>=8?"#fff":"#5c5655",r.a.createElement("div",{style:{left:a,top:t,background:n,color:e,display:c},className:"game-cell"},this.props.value)}}]),a}(r.a.Component),b=Array.from(new Array(16)),y=function(e){function a(){return Object(i.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return[b.map(function(e,a){return r.a.createElement("div",{className:"map-cell",key:a})})]}}]),a}(r.a.Component),k=function(e){function a(){return Object(i.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.map;return e.sort(function(e,a){return e.id-a.id}),r.a.createElement("div",{className:"game-field"},r.a.createElement(y,null),e.map(function(e){return r.a.createElement(p,{key:e.id,x:e.x,y:e.y,value:e.value})}))}}]),a}(r.a.Component),w=t(10);var g=function(){return Math.floor(1000001*Math.random())+(new Date).getMilliseconds()};function O(){var e,a;return e={id:g(),x:E(0,3),y:E(0,3),value:2},a={id:g(),x:E(0,3),y:E(0,3),value:2},e.x===a.x&&e.y===a.y&&(e.x=e.x>=2?e.x-1:e.x+1),[e,a]}function E(e,a){var t=e-.5+Math.random()*(a-e+1);return t=Math.round(t)}function j(e){var a,t,n=new Set;e.forEach(function(e){n.add(4*e.x+e.y)});var r=n.size;do{var c=4*(a=Math.floor(3.9*Math.random()))+(t=Math.floor(3.9*Math.random()));n.add(c)}while(r===n.size);return[].concat(Object(w.a)(e),[{id:g(),x:a,y:t,value:2}])}var C=function(e,a,t,n){var r,c=[],o=null;switch(n){case"left":for(r=a-1;r>=0;){if(0!==e[t][r]){if(0!==e[t][r]&&e[t][r].value===e[t][r+1].value&&!0!==e[t][r].increase){e[t][r].value*=2,e[t][r].increase=!0,e[t][r+1]=0,o=!0;break}break}e[t][r]=e[t][r+1],e[t][r+1]=0,o=!0,r-=1}break;case"top":for(r=t-1;r>=0;){if(0!==e[r][a]){if(0!==e[r][a]&&e[r][a].value===e[r+1][a].value&&!0!==e[r][a].increase){e[r][a].value*=2,e[r][a].increase=!0,e[r+1][a]=0,o=!0;break}break}e[r][a]=e[r+1][a],e[r+1][a]=0,o=!0,r-=1}break;case"bottom":for(r=t+1;r<=3;){if(0!==e[r][a]){if(0!==e[r][a]&&e[r][a].value===e[r-1][a].value&&!0!==e[r][a].increase){e[r][a].value*=2,e[r][a].increase=!0,e[r-1][a]=0,o=!0;break}break}e[r][a]=e[r-1][a],e[r-1][a]=0,o=!0,r+=1}break;case"right":for(r=a+1;r<=3;){if(0!==e[t][r]){if(0!==e[t][r]&&e[t][r].value===e[t][r-1].value&&!0!==e[t][r].increase){e[t][r].value*=2,e[t][r].increase=!0,e[t][r-1]=0,o=!0;break}break}e[t][r]=e[t][r-1],e[t][r-1]=0,o=!0,r+=1}break;default:return}for(var i=0;i<=3;i++)for(var l=0;l<=3;l++)0!==e[i][l]&&(e[i][l].x=l,e[i][l].y=i,c.push(e[i][l]));return{map:c,cellChanged:o}};var x=function(e,a){var t,n=Array.from(new Array(4),function(){return Array.from(new Array(4),function(){return 0})}),r=!1;if(a.map(function(e){n[e.y][e.x]=e}),"left"===e||"top"===e)for(var c=0;c<=3;c++)for(var o=0;o<=3;o++)0!==n[c][o]&&(t=C(n,o,c,e)).cellChanged&&(delete t.cellChanged,r=!0);if("right"===e||"bottom"===e)for(var i=3;i>=0;i--)for(var l=3;l>=0;l--)0!==n[i][l]&&(t=C(n,l,i,e)).cellChanged&&(delete t.cellChanged,r=!0);return t.map.forEach(function(e){delete e.increase}),{map:t.map,mapChange:r}},M=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).newGame=function(e){t.props.handleNewGame()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=0;return this.props.score.map(function(a){e+=a.value}),r.a.createElement("div",{className:"header-wrap"},r.a.createElement("div",{className:"score"},r.a.createElement("p",{className:"score-title"},"SCORE"),r.a.createElement("p",{className:"score-value"},e)),r.a.createElement("button",{onClick:this.newGame,className:"new-game-btn"},"New Game"))}}]),a}(r.a.Component);var N=function(e,a,t){return a<3&&e[t][a+1].value===e[t][a].value||a>0&&e[t][a-1].value===e[t][a].value||t>0&&e[t-1][a].value===e[t][a].value||t<3&&e[t+1][a].value===e[t][a].value},A=Array.from(new Array(4),function(){return Array.from(new Array(4),function(){return 0})});var G=function(e){e.map(function(e){A[e.y][e.x]=e});for(var a=0;a<=3;a++)for(var t=0;t<=3;t++)if(N(A,t,a))return!1;return!0};var S=function(e){return r.a.createElement("div",{className:"lose-modal"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("h1",{className:"modal-title"},"Game Over!"),r.a.createElement("button",{className:"reload-btn",onClick:e.tryAgain},"Try Again!")))},W=t(9),I={delta:10,preventDefaultTouchmoveEvent:!0,trackTouch:!0,trackMouse:!1,rotationAngle:0},T=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleMove=function(e){var a,n,r=t.state.map;switch(37!==e.keyCode&&"Left"!==e.dir||(n="left"),38!==e.keyCode&&"Up"!==e.dir||(n="top"),39!==e.keyCode&&"Right"!==e.dir||(n="right"),40!==e.keyCode&&"Down"!==e.dir||(n="bottom"),n){case"left":case"top":case"right":case"bottom":a=x(n,r);break;default:return}t.setState({map:a.map,mapChange:a.mapChange}),t.state.mapChange&&(t.setState({map:j(t.state.map)}),16===t.state.map.length&&t.setState({loseGame:G(t.state.map)}))},t.newGame=function(){t.setState({map:O(),loseGame:!1})},t.state={map:O(),mapChange:!1,loseGame:!1},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentWillMount",value:function(){document.addEventListener("keydown",this.handleMove)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleMove)}},{key:"render",value:function(){var e=this;return r.a.createElement(W.a,Object.assign({onSwiped:function(a){return e.handleMove(a)}},I),r.a.createElement("div",{className:"app-wrap"},r.a.createElement(M,{score:this.state.map,handleNewGame:this.newGame}),r.a.createElement(k,{map:this.state.map}),this.state.loseGame&&r.a.createElement(S,{tryAgain:this.newGame})))}}]),a}(r.a.Component);o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.74194c3e.chunk.js.map