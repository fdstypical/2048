{"version":3,"sources":["logic/calculateColor.js","logic/adaptiveScreen.js","cell.js","background.js","field.js","logic/generateUniqueId.js","logic/create.js","logic/moveCell.js","logic/checkResult.js","header.js","logic/checkMoveCapability.js","logic/checkLose.js","loseModal.js","App.js","index.js"],"names":["calculateColor","adaptiveCellSize","value","color","width","window","innerWidth","document","documentElement","clientWidth","body","Cell","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","showCell","_this2","timerId","setTimeout","setState","clearTimeout","height","clearInterval","left","x","top","y","background","display","react_default","a","createElement","style","className","React","Component","backGround","Array","from","BackGround","map","item","index","key","Field","cells","sort","b","id","src_background","cell","generateUniqueId","Math","floor","random","Date","getMilliseconds","initialCreate","cell1","cell2","randomInteger","min","max","rand","round","create","filledCoords","Set","forEach","add","startSize","size","sum","concat","toConsumableArray","moveCell","matrix","direction","nextLine","cellChanged","increase","push","checkResult","newMap","mapChange","Header","newGame","e","handleNewGame","score","onClick","checkMoveCapability","checkLose","LoseModal","tryAgain","config","delta","preventDefaultTouchmoveEvent","trackTouch","trackMouse","rotationAngle","App","handleMove","keyCode","dir","length","loseGame","addEventListener","removeEventListener","es","assign","onSwiped","eventData","header","field","loseModal","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.74194c3e.chunk.js","sourcesContent":["function calculateColor(value) {\n\tlet color;\n\tswitch(value){\n\t\tcase 2:\n\t\t\tcolor = '#eee4da'\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tcolor = '#ede0c8'\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tcolor = '#f2b179'\n\t\t\tbreak;\n\t\tcase 16:\n\t\t\tcolor = '#f59663'\t\t\t\n\t\t\tbreak;\n\t\tcase 32:\n\t\t\tcolor = '#f67c5f'\n\t\t\tbreak;\n\t\tcase 64:\n\t\t\tcolor = '#f65e3b'\n\t\t\tbreak;\n\t\tcase 128:\n\t\t\tcolor = '#edcf72'\n\t\t\tbreak;\n\t\tcase 256:\n\t\t\tcolor = '#edcc61'\n\t\t\tbreak;\n\t\tcase 512:\n\t\t\tcolor = '#ecc851'\n\t\t\tbreak;\n\t\tcase 1024:\n\t\t\tcolor = '#edc53f'\n\t\t\tbreak;\n\t\tcase 2048:\n\t\t\tcolor = '#edc22e'\n\t\t\tbreak;\n\t\tcase 4096:\n\t\t\tcolor = '#2285d0'\n\t\t\tbreak;\n\t\tcase 8192:\n\t\t\tcolor = '#000000'\n\t\t\tbreak;\n\t}\n\treturn color;\n}\n\nexport default calculateColor;","// module add a adaptive screen ...\r\n// screen width...\r\nconst width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\nlet adaptiveCellSize;\r\n\r\nif(width >= 319) adaptiveCellSize = 60;\r\nif(width >= 479) adaptiveCellSize = 100;\r\nif(width >= 739) adaptiveCellSize = 165;\r\n\r\nexport default adaptiveCellSize;","import React from 'react';\nimport calculateColor from './logic/calculateColor';\nimport adaptiveCellSize from './logic/adaptiveScreen'\n\nclass Cell extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshowCell: false,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\t// need to delay display cell... \n\t\tthis.timerId = setTimeout( () => {\n\t\t\tthis.setState({showCell:true});\n\t\t},210)\n\t}\n\n\tcomponentWillUnmount(){\n\t\tclearTimeout(this.timerId);\n\t}\n\n\trender() {\n\t\tif(this.state.width === 165 && this.state.height === 165) clearInterval(this.timerId)\n\n\t\tlet left = 15 + (this.props.x * adaptiveCellSize) + (this.props.x * 10) + 'px',\n\t\t\ttop = 15 + (this.props.y * adaptiveCellSize) + (this.props.y * 10) + 'px',\n\t\t\tbackground = calculateColor(this.props.value),\n\t\t\tcolor,\n\t\t\tdisplay = this.state.showCell ? 'flex' : 'none';\n\n\t\tif(this.props.value >= 8) color = '#fff';\n\t\telse color = '#5c5655';\n\n\t\treturn(\n\t\t\t<div style={{left,top,background,color,display}} className='game-cell'>\n\t\t\t\t{this.props.value}\n\t\t\t</div>\n\t\t)\n\t\t\n\t}\n}\n\nexport default Cell;","import React from 'react';\n\nconst backGround = Array.from(new Array(16));\n\nclass BackGround extends React.Component{\n\n\trender(){\n\t\treturn [\n\t\t\tbackGround.map( (item, index) => {\n\t\t\t\treturn (<div\n\t\t\t\t\tclassName = 'map-cell'\n\t\t\t\t\tkey = {index}\n\t\t\t\t/>)\n\t\t\t})\n\t\t]\n\t}\n}\n\nexport default BackGround;","import React from 'react';\nimport Cell from './cell';\nimport BackGround from './background';\n\nclass Field extends React.Component{\n\n\trender(){\n\t\tlet cells = this.props.map;\n\t\t// need for normali work animations\n\t\tcells.sort((a,b) => a.id-b.id);\n\n\t\treturn(\n\t\t\t<div className='game-field'>\n\n\t\t\t\t<BackGround />\n\n\t\t\t\t{\n\t\t\t\t\tcells.map( item => {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<Cell \n\t\t\t\t\t\t\t\tkey = {item.id}\n\t\t\t\t\t\t\t\tx = {item.x}\n\t\t\t\t\t\t\t\ty = {item.y}\n\t\t\t\t\t\t\t\tvalue = {item.value}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Field;","// generate unique ID\nfunction generateUniqueId(){\n    let id = Math.floor(Math.random() * 1000001) + new Date().getMilliseconds();\n\n    return id;\n};\n\nexport default generateUniqueId;","import generateUniqueId from './generateUniqueId';\n\nfunction initialCreate() {\n\n  let cell1, cell2;\n\n  cell1 = {\n    id: generateUniqueId(),\n    x: randomInteger(0, 3),\n    y: randomInteger(0, 3),\n    value: 2\n  }\n\n  cell2 = {\n    id: generateUniqueId(),\n    x: randomInteger(0, 3),\n    y: randomInteger(0, 3),\n    value: 2\n  }\n\n  if(cell1.x === cell2.x && cell1.y === cell2.y){\n    cell1.x = cell1.x >= 2 ? cell1.x - 1 : cell1.x + 1;\n  }\n\n  return [cell1,cell2];\n}\n\n// random number generation... \nfunction randomInteger(min, max) {\n  let rand = min - 0.5 + Math.random() * (max - min + 1)\n  rand = Math.round(rand);\n  return rand;\n}\n\nfunction create(cells) {\n  const filledCoords = new Set()\n\n  cells.forEach(cell => {\n    filledCoords.add(cell.x * 4 + cell.y) // unique Set item\n  })\n  \n  let x\n  let y\n  let startSize = filledCoords.size\n  do {\n    x = Math.floor(Math.random() * 3.9)\n    y = Math.floor(Math.random() * 3.9)\n\n    const sum = x * 4 + y\n    filledCoords.add(sum)\n  } while (startSize === filledCoords.size)\n\n  return [...cells, {\n    id: generateUniqueId(),\n    x,\n    y,\n    value: 2\n  }]\n}\n\nexport {initialCreate, create};","function moveCell(matrix, x, y,direction) {\n\tlet map = [],\n\t\tnextLine,\n\t\tcellChanged = null; // need to understand whether to add a new cell\n\n\tswitch(direction){\n\n\t\tcase 'left':\n\t\t\tnextLine = x - 1;\n\n\t\t\twhile(nextLine >= 0){\n\n\t\t\t\tif(matrix[y][nextLine] === 0){\n\t\t\t\t\tmatrix[y][nextLine] = matrix[y][nextLine+1];\n\t\t\t\t\tmatrix[y][nextLine+1] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\t\t\t\t}\n\n\t\t\t\telse if(matrix[y][nextLine] !== 0 &&\n\t\t\t\t\t\tmatrix[y][nextLine].value === matrix[y][nextLine+1].value &&\n\t\t\t\t\t\tmatrix[y][nextLine].increase !== true){\n\n\t\t\t\t\t// check march\n\t\t\t\t\tmatrix[y][nextLine].value *= 2;\n\t\t\t\t\tmatrix[y][nextLine].increase = true;\n\n\t\t\t\t\tmatrix[y][nextLine+1] = 0;\n\t\t\t\t\t\n\t\t\t\t\tcellChanged = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse break;\n\t\t\t\tnextLine -= 1;\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 'top':\n\t\t\tnextLine = y - 1;\n\n\t\t\twhile(nextLine >= 0){\n\t\t\t\tif(matrix[nextLine][x] === 0){\n\t\t\t\t\tmatrix[nextLine][x] = matrix[nextLine+1][x];\n\t\t\t\t\tmatrix[nextLine+1][x] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\t\t\t\t}\n\t\n\t\t\t\telse if(matrix[nextLine][x] !== 0 &&\n\t\t\t\t\t\tmatrix[nextLine][x].value === matrix[nextLine+1][x].value &&\n\t\t\t\t\t\tmatrix[nextLine][x].increase !== true){\n\n\t\t\t\t\t// check march\n\t\t\t\t\tmatrix[nextLine][x].value *= 2;\n\t\t\t\t\tmatrix[nextLine][x].increase = true;\n\t\t\t\t\t\n\t\t\t\t\tmatrix[nextLine+1][x] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse break;\n\n\t\t\t\tnextLine -= 1;\n\t\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 'bottom':\n\n\t\t\tnextLine = y + 1;\n\n\t\t\twhile(nextLine <= 3){\n\t\t\t\tif(matrix[nextLine][x] === 0){\n\t\t\t\t\tmatrix[nextLine][x] = matrix[nextLine-1][x];\n\t\t\t\t\tmatrix[nextLine-1][x] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\t\t\t\t}\n\t\n\t\t\t\telse if(matrix[nextLine][x] !== 0 &&\n\t\t\t\t\t\tmatrix[nextLine][x].value === matrix[nextLine-1][x].value &&\n\t\t\t\t\t\tmatrix[nextLine][x].increase !== true){\n\n\t\t\t\t\t// check march\n\t\t\t\t\tmatrix[nextLine][x].value *= 2;\n\t\t\t\t\tmatrix[nextLine][x].increase = true;\n\t\t\t\t\t\n\t\t\t\t\tmatrix[nextLine-1][x] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse break;\n\n\t\t\t\tnextLine += 1;\n\t\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 'right':\n\n\t\t\tnextLine = x + 1;\n\n\t\t\twhile(nextLine <= 3){\n\t\t\t\tif(matrix[y][nextLine] === 0){\n\t\t\t\t\tmatrix[y][nextLine] = matrix[y][nextLine-1];\n\t\t\t\t\tmatrix[y][nextLine-1] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\t\t\t\t}\n\n\t\t\t\telse if(matrix[y][nextLine] !== 0 &&\n\t\t\t\t\t\tmatrix[y][nextLine].value === matrix[y][nextLine-1].value &&\n\t\t\t\t\t\tmatrix[y][nextLine].increase !== true){\n\n\t\t\t\t\t// check march\n\t\t\t\t\tmatrix[y][nextLine].value *= 2;\n\t\t\t\t\tmatrix[y][nextLine].increase = true;\n\t\t\t\t\t\n\t\t\t\t\tmatrix[y][nextLine-1] = 0;\n\n\t\t\t\t\tcellChanged = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telse break;\n\n\t\t\t\tnextLine += 1;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\treturn;\n\t}\n\n\tfor(let y=0; y <= 3; y++){\n\t\tfor(let x=0; x <= 3; x++){\n\t\t\tif(matrix[y][x] === 0) continue;\n\n\t\t\tmatrix[y][x].x = x;\n\t\t\tmatrix[y][x].y = y;\n\n\t\t\tmap.push(matrix[y][x]);\n\t\t}\n\t}\n\n\treturn {map, cellChanged};\n}\n\nexport default moveCell;","import moveCell from './moveCell';\n\nfunction checkResult(direction, cells) {\n\t// abstract matrix\n\tconst matrix = Array.from(new Array(4), () => Array.from(new Array(4), () => 0));\n\n\tlet newMap,\n\t\tmapChange = false;\n\n\tcells.map( item => {\n\t\tmatrix[item.y][item.x] = item;\n\t})\n\n\tif(direction === 'left' || direction === 'top'){\n\t\tfor(let y=0; y <= 3; y++){\n\t\t\tfor(let x=0; x <= 3; x++){\n\t\t\t\tif(matrix[y][x] === 0) continue;\n\t\t\t\tnewMap = moveCell(matrix,x,y,direction);\n\n\t\t\t\t// did the map change? \n\t\t\t\tif(newMap.cellChanged) {\n\t\t\t\t\tdelete newMap.cellChanged;\n\t\t\t\t\tmapChange = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif(direction === 'right' || direction === 'bottom'){\n\t\tfor(let y=3; y >= 0; y--){\n\t\t\tfor(let x=3; x >= 0; x--){\n\t\t\t\tif(matrix[y][x] === 0) continue;\n\t\t\t\tnewMap = moveCell(matrix,x,y,direction);\n\n\t\t\t\t// did the map change?\n\t\t\t\tif(newMap.cellChanged) {\n\t\t\t\t\tdelete newMap.cellChanged;\n\t\t\t\t\tmapChange = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tnewMap.map.forEach( item => {\n\t\tdelete item.increase;\n\t})\n\t\n\treturn {\n\t\tmap:newMap.map,\n\t\tmapChange\n\t};\n}\n\nexport default checkResult;","import React from 'react';\n\nclass Header extends React.Component{\n\n\tnewGame = (e) => {\n\t\tthis.props.handleNewGame();\n\t}\n\n\trender(){\n\t\tlet score = 0;\n\n\t\tthis.props.score.map( item => {\n\t\t\tscore += item.value;\n\t\t})\n\n\t\treturn(\n\t\t\t<div className='header-wrap'>\n\t\t\t\t<div className='score'>\n\t\t\t\t\t<p className='score-title'>SCORE</p>\n\t\t\t\t\t<p className='score-value'>{score}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<button \n\t\t\t\t\tonClick={this.newGame}\n\t\t\t\t\tclassName='new-game-btn'\n\t\t\t\t>\n\t\t\t\t\tNew Game\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Header;","function checkMoveCapability(matrix, x, y) {\r\n\t// possible positions for the move!\r\n\r\n\tif(x < 3 && matrix[y][x+1].value === matrix[y][x].value) return true;\r\n\tif(x > 0 && matrix[y][x-1].value === matrix[y][x].value) return true;\r\n\r\n\tif(y > 0 && matrix[y-1][x].value === matrix[y][x].value) return true;\r\n\tif(y < 3 && matrix[y+1][x].value === matrix[y][x].value) return true;\r\n\r\n\treturn false;\r\n}\r\n\r\nexport default checkMoveCapability;","import checkMoveCapability from './checkMoveCapability';\r\n\r\n// abstract matrix\r\nconst matrix = Array.from(new Array(4), () => Array.from(new Array(4), () => 0));\r\n\r\nfunction checkLose(map) {\r\n\tlet moveCapabilityCell = null;\r\n\r\n\tmap.map( item => {\r\n\t\tmatrix[item.y][item.x] = item;\r\n\t})\r\n\r\n\tfor(let y=0; y <= 3; y++){\r\n\t\tfor(let x=0; x <= 3; x++){\r\n\t\t\tmoveCapabilityCell = checkMoveCapability(matrix, x, y);\r\n\t\t\t\r\n\t\t\tif(moveCapabilityCell) return false; // you don`t lose game!\r\n\t\t}\r\n\t}\r\n\r\n\treturn true; // you lose game!\r\n}\r\n\r\nexport default checkLose;","import React from 'react';\r\n\r\nfunction LoseModal(props) {\r\n\treturn (\r\n\t\t<div className='lose-modal'>\r\n\t\t\t<div className='modal-dialog'>\t\r\n\t\t\t\t<h1 className='modal-title'>Game Over!</h1>\r\n\r\n\t\t\t\t<button \r\n\t\t\t\t\tclassName='reload-btn'\r\n\t\t\t\t\tonClick={props.tryAgain}\r\n\t\t\t\t>\r\n\t\t\t\t\tTry Again!\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LoseModal;","import React from 'react';\nimport './App.css';\nimport Field from './field';\nimport {initialCreate, create} from './logic/create';\nimport checkResult from './logic/checkResult';\nimport Header from './header';\nimport checkLose from './logic/checkLose';\nimport LoseModal from './loseModal';\n\n// react-swipeable\nimport { useSwipeable, Swipeable } from 'react-swipeable'\n\nconst config = {\n  delta: 10,                             // min distance(px) before a swipe starts\n  preventDefaultTouchmoveEvent: true,   // preventDefault on touchmove, *See Details*\n  trackTouch: true,                      // track touch input\n  trackMouse: false,                     // track mouse input\n  rotationAngle: 0,                      // set a rotation angle\n}\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      map: initialCreate(),\n      mapChange: false,\n      loseGame: false,\n    };\n  }\n\n  handleMove = (e) => {\n\n    let map = this.state.map,\n        newMap,\n        direction;\n\n    if(e.keyCode === 37 || e.dir === 'Left') direction = 'left';\n    if(e.keyCode === 38 || e.dir === 'Up') direction = 'top';\n    if(e.keyCode === 39 || e.dir === 'Right') direction = 'right';\n    if(e.keyCode === 40 || e.dir === 'Down') direction = 'bottom';\n\n    switch(direction){\n\n      case 'left':\n        newMap = checkResult(direction , map);\n        break;\n      case 'top':\n        newMap = checkResult(direction , map);\n        break;\n      case 'right':\n        newMap = checkResult(direction , map);\n        break;\n      case 'bottom':\n        newMap = checkResult(direction , map);\n        break;\n      default:\n        return;\n        break;\n    }\n\n    this.setState({\n      map: newMap.map,\n      mapChange: newMap.mapChange\n    });\n\n    if(this.state.mapChange){\n\n      this.setState({map:create(this.state.map)});\n\n      // check lose\n      if(this.state.map.length === 16){\n        this.setState({loseGame: checkLose(this.state.map)}); // check lose!\n      }\n    }\n  }\n\n  componentWillMount(){\n    document.addEventListener('keydown', this.handleMove);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener('keydown', this.handleMove);\n  }\n\n  // new game reloader\n\n  newGame = () => {\n    this.setState({\n      map:initialCreate(),\n      loseGame: false\n    });\n  }\n\n  render(){\n    return (\n      <Swipeable onSwiped={(eventData) => this.handleMove(eventData)} {...config} >\n        <div className='app-wrap'>\n          <Header \n            score = {this.state.map}\n            handleNewGame = {this.newGame}\n          />\n          <Field \n            map={this.state.map}\n          />\n\n          { \n            // lose modal... ;)\n            this.state.loseGame && <LoseModal tryAgain={this.newGame}/>\n          }\n        </div>\n      </Swipeable>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}